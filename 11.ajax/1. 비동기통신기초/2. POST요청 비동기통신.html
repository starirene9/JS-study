<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        label {
            display: block;
        }

    </style>
</head>
<body>
<div class="register">
<!--    <label>-->
<!--        # 회원번호 : <input type="text" name="id">-->
<!--    </label>-->
    <label>
        # 계정명 : <input type="text" name="account">
    </label>
    <label>
        # 이름 : <input type="text" name="userName">
    </label>
    <label>
        # 주소 : <input type="text" name="address">
    </label>
    <label>
        <button id="insert">회원가입</button>
    </label>
</div>
<script>
    const $regBtn = document.getElementById('insert');
    $regBtn.onclick = e => {
        console.log('회원가입 클릭!');
        // 서버에 post 요청을 보내서 저장시켜야 함
        const xhr = new XMLHttpRequest();
        //요청정보 설정
        xhr.open('POST', 'http://localhost:5000/users');
        //요청시 서버로 보낼 데이터 (payload) 만들기
        const userPostPayload = {
          // id : +document.querySelector('input[name=id]').value,
          account : document.querySelector('input[name=account]').value,
          userName : document.querySelector('input[name=userName]').value,
          address: document.querySelector('input[name=address]').value
        };
        console.log(userPostPayload);
        // 요청 헤더에 mime type 설정 하기 : 이상한게 아니라는 것을 알려주어야 함
        xhr.setRequestHeader('content-type', 'application/json')
        //요청 보내기
        xhr.send(JSON.stringify(userPostPayload));

        // 응답 확인
        xhr.onload = e => {
            console.log(xhr)
        };
    };
</script>
</body>
</html>